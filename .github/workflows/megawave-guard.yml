name: MegaWave Guard (advisory)

on:
  pull_request:

permissions:
  contents: read

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Check for MegaWave adoption files
        run: |
          set -e
          miss=0
          test -f docs/ops/bpoe/MEGAWAVE_ADOPTION.md || { echo "::warning ::Missing MEGAWAVE_ADOPTION.md"; miss=1; }
          # Soft check for a CoSync note in this PR (not required): just warn
          notes=$(git ls-files "docs/intent/advice/notes/*/CoSync_*.md" | wc -l)
          if [ "$notes" -lt 1 ]; then
            echo "::warning ::No CoSync notes found in tree (ok if landing separately)"
          fi
          exit 0
