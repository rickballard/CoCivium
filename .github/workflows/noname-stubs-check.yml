name: noname-stubs-check
on:
  pull_request:
    paths:
      - README.md
      - insights/**.md
      - stories/**.md
      - .github/workflows/noname-stubs-check.yml
  push:
    branches: [ main ]
    paths:
      - README.md
      - insights/**.md
      - stories/**.md
      - .github/workflows/noname-stubs-check.yml
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Verify stubs exist and point to canonical
        run: |
          set -euo pipefail
          test -f stories/being-noname.md
          test -f insights/story-being-noname.md
          grep -q 'insights/Insight_Story_Being_Noname_c2_20250801.md' stories/being-noname.md
          grep -q 'insights/Insight_Story_Being_Noname_c2_20250801.md' insights/story-being-noname.md
          echo "Noname stubs OK âœ…"
